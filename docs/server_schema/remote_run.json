{
    "title": "remote_run/",
    "description": "Schema for metadata required to remotely run a siliconcompiler job stage.",
    "examples": [
        {
            "job_hash": "0123456789abcdeffedcba9876543210"
        },
        {
            "username": "valid_user",
            "key": "valid_base64_encoded_key",
            "job_hash": "0123456789abcdeffedcba9876543210"
        },
        {
            "username": "valid_user",
            "key": "valid_base64_encoded_key",
            "job_hash": "0123456789abcdeffedcba9876543210",
            "new_hosts": 2,
            "new_host_ram": 8
        }
    ],

    "type": "object",
    "additionalProperties": false,
    "properties": {
        "username": {
            "title": "Username",
            "description": "User account ID. Required if data is encrypted.",
            "examples": ["my_user", "account1234"],

            "type": "string",
            "pattern": "^[^\\s;]*$"
        },

        "key": {
            "title": "Authentication Key",
            "description": "Base64-encoded decryption key for the user account's public key. Required if the uploaded data is encrypted.",
            "examples": ["PHlvdXJfa2V5X2hlcmU+"],

            "type": "string"
        },

        "job_hash": {
            "title": "Job Hash",
            "description": "UUID associated with the previously-imported project data.",
            "examples": ["01234567890abcdeffedcba0987654321"],

            "type": "string",
            "pattern": "^[0-9a-f]{32}$"
        },

        "new_hosts": {
            "title": "New Hosts to Request",
            "description": "Number of temporary cloud hosts to request for this job. Requires authentication.",
            "examples": [0, 2],

            "type": "integer"
        },

        "new_host_ram": {
            "title": "New Host RAM (GiB)",
            "description": "Amount of RAM to request in temporary hosts, in gigabytes. 0 = 'smallest available'.",
            "examples": [4, 10],

            "type": "integer",
            "default": 0
        },

        "new_host_threads": {
            "title": "New Host Threads",
            "description": "Number of threads to request in temporary hosts. 0 = 'smallest available'.",
            "examples": [2, 8],

            "type": "integer",
            "default": 0
        }
    },

    "required": ["job_hash"],

    "dependencies": {
        "username": ["key"],
        "key": ["username"],
        "new_hosts": ["key"],
        "new_host_ram": ["new_hosts"],
        "new_host_threads": ["new_hosts"]
    }
}
